import{_ as g,m as x,b as V,r as p,o as m,c as _,e as s,i as w,d as a,w as y,t as r,F as C,h as k,n as u,g as E,v as S}from"./index-c7316edf.js";import{S as T}from"./sweetalert2.all-aa99cbf5.js";import{c as b}from"./cart-84756834.js";const{VITE_URL:U,VITE_PATH:I}={VITE_URL:"https://vue3-course-api.hexschool.io/",VITE_PATH:"tomyalan978",BASE_URL:"/vite-deploy-5",MODE:"production",DEV:!1,PROD:!0,SSR:!1},L={data(){return{form:{user:{name:"",email:"",tel:"",address:""},message:""}}},components:{},computed:{...x(b,["carts","final_total"])},methods:{...V(b,["getCart","addToCart","deleteItem","updateCartItem","deleteCartsItem"]),createOrder(){const n=this.$loading.show({container:this.fullPage?null:this.$refs.formContainer,canCancel:!0,onCancel:this.onCancel}),e=`${U}/v2/api/${I}/order`,h=this.form;this.$http.post(e,{data:h}).then(i=>{const t=i.data.orderId;console.log("id:",t),n.hide(),T.fire({position:"top",title:"訂單已送出",showConfirmButton:!1,timer:1500,customClass:{popup:"small-swal2-popup",title:"small-swal2-title"}}),this.$refs.form.resetForm(),this.$router.push({path:`form/${t}`}),this.getCart()}).catch(i=>{alert(i.response.data.message)})},routerLook(){this.$router.push({path:"/products"})}},mounted(){}},q={class:"container"},B={class:"row"},D={key:0,class:"col-md-12 text-center align-items-center my-8"},R=s("h2",null,"購物車沒有產品",-1),j={class:"col-md-8"},A=s("h2",{class:"fs-4 my-5"},"填寫訂購資訊",-1),N={class:"mb-3"},O=s("label",{for:"email",class:"form-label"},"Email",-1),P={class:"mb-3"},$=s("label",{for:"name",class:"form-label"},"收件人姓名",-1),F={class:"mb-3"},H=s("label",{for:"tel",class:"form-label"},"收件人電話",-1),M={class:"mb-3"},z=s("label",{for:"address",class:"form-label"},"收件人地址",-1),G={class:"mb-3"},J=s("label",{for:"message",class:"form-label"},"留言",-1),K=s("div",{class:"text-center mb-4"},[s("button",{type:"submit",class:"btn btn-danger btn-lg"},"送出訂單")],-1),Q={class:"col-md-4 mb-5 mt-md-17 mt-sm-5 d-none d-md-block"},W={class:"card bg-light"},X=s("div",{class:"card-header text-center text-white bg-success mb-2"}," 訂單摘要 ",-1),Y={class:"d-flex justify-content-between mb-2"},Z=s("span",{class:"px-2"},"小計",-1),ss={class:"px-2"},es=s("div",{class:"d-flex justify-content-between mb-2"},[s("span",{class:"px-2"},"運費"),s("span",{class:"px-2"},"$0")],-1),ts={class:"d-flex justify-content-between mb-3"},os=s("span",{class:"px-2"},"總計",-1),ls={class:"px-2"},as={class:"card mt-6"},ns=s("div",{class:"card-header text-center text-white bg-success"}," 購物清單 ",-1),rs={class:"card-body bg-light"},is={class:"d-flex"},ds={class:"pb-2"},cs={class:"cart-img w-100"},ms=["src"],_s={class:"pb-2"},us={class:"px-4 text-nowrap"},ps=s("br",null,null,-1),hs={class:"px-4"},fs=s("br",null,null,-1),bs={class:"px-4"};function vs(n,e,h,i,t,f){const d=p("v-field"),c=p("error-message"),v=p("v-form");return m(),_("div",q,[s("div",B,[n.carts.length===0?(m(),_("div",D,[R,s("a",{href:"#",class:"btn btn-to-shop btn-outline bg-success text-white px-7 mt-4 mb-8",onClick:e[0]||(e[0]=o=>f.routerLook()),"data-bs-dismiss":"offcanvas"},"來去看看")])):w("",!0),s("div",j,[A,a(v,{ref:"form",onSubmit:f.createOrder},{default:y(({errors:o})=>[s("div",N,[O,a(d,{id:"email",name:"email",type:"email",class:u(["form-control",{"is-invalid":o.email}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:t.form.user.email,"onUpdate:modelValue":e[1]||(e[1]=l=>t.form.user.email=l)},null,8,["class","modelValue"]),a(c,{name:"email",class:"invalid-feedback"})]),s("div",P,[$,a(d,{id:"name",name:"姓名",type:"text",class:u(["form-control",{"is-invalid":o.姓名}]),placeholder:"請輸入姓名",rules:"required",modelValue:t.form.user.name,"onUpdate:modelValue":e[2]||(e[2]=l=>t.form.user.name=l)},null,8,["class","modelValue"]),a(c,{name:"姓名",class:"invalid-feedback"})]),s("div",F,[H,a(d,{id:"tel",name:"電話",type:"text",class:u(["form-control",{"is-invalid":o.電話}]),placeholder:"請輸入電話",rules:"required|min:8|max:10",modelValue:t.form.user.tel,"onUpdate:modelValue":e[3]||(e[3]=l=>t.form.user.tel=l)},null,8,["class","modelValue"]),a(c,{name:"電話",class:"invalid-feedback"})]),s("div",M,[z,a(d,{id:"address",name:"地址",type:"text",class:u(["form-control",{"is-invalid":o.地址}]),placeholder:"請輸入地址",rules:"required",modelValue:t.form.user.address,"onUpdate:modelValue":e[4]||(e[4]=l=>t.form.user.address=l)},null,8,["class","modelValue"]),a(c,{name:"地址",class:"invalid-feedback"})]),s("div",G,[J,E(s("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":e[5]||(e[5]=l=>t.form.message=l)},null,512),[[S,t.form.message]])]),K]),_:1},8,["onSubmit"])]),s("div",Q,[s("div",W,[X,s("div",Y,[Z,s("span",ss,r(n.final_total),1)]),es,s("div",ts,[os,s("span",ls,r(n.final_total),1)])]),s("div",as,[ns,s("div",rs,[s("table",null,[s("tbody",null,[(m(!0),_(C,null,k(n.carts,o=>(m(),_("tr",{class:"border-bottom",key:o.id},[s("div",is,[s("td",ds,[s("div",cs,[s("img",{src:o.product.imageUrl,style:{width:"72px",height:"72px","object-fit":"cover"}},null,8,ms)])]),s("td",_s,[s("span",us,r(o.product.title),1),ps,s("small",hs,r(o.qty)+" 個",1),fs,s("span",bs,"NT$"+r(o.total),1)])])]))),128))])])])])])])])}const ws=g(L,[["render",vs]]);export{ws as default};
